<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta codeset="ASCII">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>СКД</title>
		
		<link href="css/_cyborg_bootstrap.min.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		
		<script src="/socket.io/socket.io.js"></script>
		<script src="js/jquery-1.10.2.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/ion.sound.js"></script>
		
		<script>
			
			var socket = io();
			
			socket.on('currentState',function(data){
				//Получение первичных настроек, при подключении к серверу
				//data.doorState
				//data.alarmState
				//data.facilityName
			});
			
			socket.on('enterPin',function(){
				//Сервер требует пинкод
			});
			
			socket.on('pinFalse',function(){
				//Значит пинкод неверный
			});
			
			socket.on('alarmDeactivated',function(data){
				//Сигнализация деактивирована DATA - userName
			});
			
			socket.on('alarmActivateAfter',function(data){
				//Сигнализация активируется через DATA секунд
			});
			
			socket.on('alarmActivated',function(){
				//Сигнализация активирована
			});
			
			socket.on('alarmActivationCancelled',function(){
				//Активация сигнализации отменена
			});
			
			socket.on('doorIsClosed',function(data){
				//Состояние двери изменилось DATA - TRUE/FALSE
			});
			
			socket.on('dieAfter',function(data){
				//Запуск сирены через DATA секунд
			});
			
			function turnAlarmOn(){
				//Запрос на активацию сигнализации
				socket.emit('turnAlarmOn',123);
			}
			
			function turnAlarmOff(){
				//Запрос на деактивацию сигнализации
				socket.emit('turnAlarmOff',123);
			}
			
			function submitPin(data){
				//Запрос на проверку пинкода DATA - пинкод
				socket.emit('submitPin',data);
			}
			
			function cancelAlarmActivation(){
				//Запрос отмены активации сигнализации
				socket.emit('cancelAlarmActivation',123);
			}
			
			function forcedAlarmActivation(){
				//Запрос немедленной активации сигнализации
				socket.emit('forcedAlarmActivation',123);
			}
			
		</script>
		
		<script>
			
			$(document).ready(function(){
				
				clickOrTouch = (navigator.userAgent.toLowerCase().indexOf("android") != -1) ? 'touchend' : 'click';
				console.log("program selected - "+clickOrTouch);
			
				ion.sound({
					sounds: [
						{name: "water_droplet"}
					],
					path: "sounds/",
					preload: true,
					volume: 1.0
				});
				
				$('.btn').on(clickOrTouch, function(){
					//Нажата любая кнопка
					ion.sound.play("water_droplet");
				});
				
				$('.digit').on(clickOrTouch, function(){
					//Нажата цифра
					$('#pincodeValue').append($(this).html().trim());
				});
				
				$('#turnOffAlarmButton').on(clickOrTouch, function(){
					//Нажата кнопка деактивации сигнализации
				});
				
				$('#turnOnAlarmButton').on(clickOrTouch, function(){
					//Нажата кнопка активации сигнализации
				});
				
				$('#clearPinButton').on(clickOrTouch, function(){
					//Нажата кнопка очистки пинкода
					$('#pincodeValue').html('');
				});
				
				$('#backspacePinButton').on(clickOrTouch, function(){
					//Нажата кнопка удаления последнего символа пинкода
					$('#pincodeValue').html($('#pincodeValue').html().slice(0,-1));
				});
				
				$('#cancelPinButton').on(clickOrTouch, function(){
					//Нажата кнопка отмены ввода пинкода
					hideAllWidgets();
					$('#header-widget').show();
					$('#body-widget').show();
				});
				
				$('#okPinButton').on(clickOrTouch, function(){
					//Нажата кнопка подтверждения пинкода
				});
				
				$('#cancelAlarmActivationButton').on(clickOrTouch, function(){
					//Нажата кнопка отмены активации сигнализации
				});
				
				$('#forcedAlarmActivationButton').on(clickOrTouch, function(){
					//Нажата кнопка немедленной активации сигнализации
				});
				
				
				
			});
			
			function hideAllWidgets(){
				console.log('HideAllWidgets');
				$('#header-widget').hide();
				$('#body-widget').hide();
				$('#info-widget').hide();
				$('#pincode-widget').hide();
				$('#countdown-widget').hide();
			}
			
			
		</script>
		
	</head>
	<body>
	
		<div id="header-widget" style="background-color: #3c3c3c; padding: 1em;">
			<div class="container">
				<div class="row">
					<div class="col-xs-10">
						<h1 class="qqq-h1 qqq-margin0" style="margin:10px 0;" >Объект: <span id="__">Неизвестно</span></h1>
						<h1 class="qqq-h1 qqq-margin0" style="margin:10px 0;" id="__">Пользователь: <span id="__">Неизвестно</span></h1>
					</div>
					<div class="col-xs-2 text-right">
						<img src="img/logo.png" style="height:7em; margin-bottom: 10px;"/>
					</div>
				</div>
			</div>
		</div>
		
		<div id="body-widget" style="padding: 1em;">
			<div class="container">
				<div class="row">
					<div class="col-xs-6">
						<button id='__' class="btn btn-default btn-lg btn-block btn-danger qqq-btn" type="submit">
							<p style="margin:0;">Отключить сигнализацию</p>
						</button>
						<button id='__' class="btn btn-default btn-lg btn-block btn-success qqq-btn" type="submit" style="margin-top: 0px;">
							<p style="margin:0;">Включить сигнализацию</p>
						</button>
					</div>
					<div class="col-xs-6">
						<button id='__' class="btn btn-default btn-lg btn-block btn-info qqq-btn" type="submit">
							<p style="margin:0;">Подробнее</p>
						</button>
					</div>
				</div>
				
				<div class="row qqq-row text-center">
					<div class="col-xs-6 qqq-row-left">
						<h1 class="qqq-h1">Состояние двери:</h1>
						<h1 class="qqq-h1"><mark id='__'>Неизвестно</mark></h1>
						<img id="doorOpenIcon" src="img/openDoor.png" style="height:10em;"/>
						<img id="doorCloseIcon" src="img/closedDoor.png" style="height:10em;"/>
					</div>
					<div class="col-xs-6 qqq-row-right">
						<h1 class="qqq-h1">Состояние сигнализации:</h1>
						<h1 class="qqq-h1"><mark id='__'>Неизвестно</mark></h1>
						<img id="alarmOnIcon" src="img/alarmOn.png" style="height:10em;"/>
						<img id="alarmOffIcon" src="img/alarmOff.png" style="height:10em;"/>
					</div>
				</div>
			</div>
		</div>
		
		<div id="info-widget" style="padding: 1em;">
			<div class="container">
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-12">
						<h1 class="qqq-h1 text-center">Страница находится на этапе разработки</h1>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-3">&nbsp;</div>
					<div class="col-xs-6">
						<button id="__" class="btn btn-default btn-lg btn-block qqq-btn btn-info" >Вернуться назад</button>
					</div>
					<div class="col-xs-3">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
			</div>
		</div>
		
		<div id="pincode-widget" style="padding: 1em;">
			<div class="container">
				<div id="__" class="row">
					<div class="col-xs-12">
						<h1 class="qqq-h1 text-danger pull-left">Дверь была открыта, введите пинкод. Осталось: </h1>
						<h1 id="__" class="qqq-h1 text-danger pull-left">60</h1>
						<h1 class="qqq-h1 text-danger pull-left">&nbsp;сек.</h1>
					</div>
				</div>
				<div id="__" class="row">
					<div class="col-xs-12">
						<h1 class="qqq-h1 text-danger text-center">Введите пинкод </h1>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >1</button></div>
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >2</button></div>
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >3</button></div>
				</div>
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >4</button></div>
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >5</button></div>
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >6</button></div>
				</div>
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >7</button></div>
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >8</button></div>
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >9</button></div>
				</div>
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-4" ><button id='clearPinButton' class="btn btn-default btn-lg btn-block btn-info qqq-btn">Очистить</button></div>
					<div class="col-xs-4" ><button class="digit btn btn-default btn-lg btn-block qqq-btn" >0</button></div>
					<div class="col-xs-4" ><button id='backspacePinButton' class="btn btn-default btn-lg btn-block btn-info qqq-btn" >Удалить</button></div>
				</div>
				<div class="row">
					<div class="col-xs-12">&nbsp;</div>
				</div>
				<div class="row">
					<div class="col-xs-4" ><button id='cancelPinButton' class="btn btn-default btn-lg btn-block btn-warning qqq-btn" >Отмена</button></div>
					<div class="col-xs-4">
						<div class="well qqq-well">
							<div class="row">
								<div class="col-xs-12">
									<h1 id='pincodeValue' class="qqq-h1 text-muted qqq-margin0" style="overflow:hidden;height: 1em;text-align: center;"></h1>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xs-4" ><button class="btn btn-default btn-lg btn-block btn-success qqq-btn" >Ok</button></div>
				</div>
			</div>
		</div>
		
		<div id="countdown-widget" style="padding: 1em;">
			<div class="container">
				<div class="row text-center">
					<div class="col-xs-12">
						<h1 class="qqq-h1"><mark id='__'></mark> секунд до включения сигнализации</h1>
					</div>
					<div class="col-xs-12">
						<h1 class="qqq-h1">Состояние двери:</h1>
						<h1 class="qqq-h1"><mark id='__'>Неизвестно</mark></h1>
						<img id="doorOpenIcon1" src="img/openDoor.png" style="height:10em;"/>
						<img id="doorCloseIcon1" src="img/closedDoor.png" style="height:10em;"/>
					</div>
					<div class="col-xs-6">
						<button id="__" class="btn btn-default btn-lg btn-block btn-danger qqq-btn">Отмена</button>
					</div>
					<div class="col-xs-6">
						<button id="__" class="btn btn-default btn-lg btn-block btn-success qqq-btn" >Включить сейчас</button>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title text-center" id="myModalLabel">Внимание!</h4>
					</div>
					<div class="modal-body">
						...
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
					</div>
				</div>
			</div>
		</div>
		
		
	</body>
</html>